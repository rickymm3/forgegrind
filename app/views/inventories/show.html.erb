<% content_for :title, "Items" %>

<div class="relative flex min-h-screen flex-col"
     data-controller="inventory"
     data-inventory-active-tab-value="all">
  <header class="sticky top-0 z-40 border-b border-slate-800 bg-slate-950/85 backdrop-blur supports-[backdrop-filter]:bg-slate-950/60">
    <div class="mx-auto flex h-20 w-full max-w-4xl items-center justify-between gap-4 px-4">
      <div class="flex items-center gap-3">
        <button type="button"
                class="inline-flex h-11 w-11 items-center justify-center rounded-2xl border border-slate-700/60 bg-slate-900/60 text-slate-300 transition hover:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-indigo-400 focus-visible:ring-offset-2 focus-visible:ring-offset-slate-950"
                data-tab="containers"
                data-action="inventory#switchTab"
                aria-label="Filter containers">
          <svg aria-hidden="true" class="h-5 w-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
            <path d="M3 7.5h18M5.5 12h13M9 16.5h6" stroke-linecap="round" stroke-linejoin="round" />
          </svg>
        </button>

        <div class="flex flex-col">
          <span class="text-lg font-semibold uppercase tracking-wide text-slate-100">Items</span>
          <div class="flex items-center gap-2 text-[11px] text-slate-400">
            <span>Containers:
              <span id="inventory-containers-count" class="font-semibold text-indigo-200"><%= @containers.sum(&:count) %></span>
            </span>
            <span class="text-slate-600">|</span>
            <span>Stacks:
              <span id="inventory-items-count" class="font-semibold text-emerald-200"><%= @items.sum(&:quantity) %></span>
            </span>
          </div>
        </div>
      </div>

      <div class="flex items-center gap-2">
        <button type="button"
                class="inline-flex h-11 w-11 items-center justify-center rounded-2xl border border-slate-700/60 bg-slate-900/60 text-slate-300 transition hover:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-indigo-400 focus-visible:ring-offset-2 focus-visible:ring-offset-slate-950"
                data-tab="items"
                data-action="inventory#switchTab"
                aria-label="Filter materials">
          <svg aria-hidden="true" class="h-5 w-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
            <path d="M12 3l7.794 4.5v9L12 21l-7.794-4.5v-9L12 3z" stroke-linecap="round" stroke-linejoin="round" />
          </svg>
        </button>
        <button type="button"
                class="inline-flex h-11 w-11 items-center justify-center rounded-2xl border border-slate-700/60 bg-slate-900/60 text-slate-300 transition hover:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-indigo-400 focus-visible:ring-offset-2 focus-visible:ring-offset-slate-950"
                data-tab="all"
                data-action="inventory#switchTab"
                aria-label="Show all items">
          <svg aria-hidden="true" class="h-5 w-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
            <path d="M5 5h4v4H5V5zm0 6h4v4H5v-4zm6 0h4v4h-4v-4zm6 0h4v4h-4v-4zM11 5h4v4h-4V5zm6-4h4v4h-4V1z" stroke-linecap="round" stroke-linejoin="round" />
          </svg>
        </button>
      </div>
    </div>
  </header>

  <div class="mx-auto w-full max-w-4xl flex-1 px-4 pb-28 pt-6 space-y-10">
    <section data-section="containers"
             class="space-y-4"
             data-inventory-target="section">
      <div class="flex items-center justify-between">
        <div>
          <h2 class="text-sm font-semibold uppercase tracking-wide text-slate-300">Containers</h2>
          <p class="text-xs text-slate-500">Open pet care boxes to reveal new supplies and currency.</p>
        </div>
        <span class="text-[11px] uppercase text-slate-500">Total: <%= @containers.sum(&:count) %></span>
      </div>
      <%= render "inventories/containers_grid", containers: @containers %>
    </section>

    <section data-section="items"
             class="space-y-4"
             data-inventory-target="section">
      <div class="flex items-center justify-between">
        <div>
          <h2 class="text-sm font-semibold uppercase tracking-wide text-slate-300">Materials &amp; Consumables</h2>
          <p class="text-xs text-slate-500">Items used throughout the pet hub for care, evolution, and upgrades.</p>
        </div>
        <span class="text-[11px] uppercase text-slate-500">Stacks: <%= @items.count %></span>
      </div>
      <%= render "inventories/items_grid", items: @items %>
    </section>
  </div>
</div>

<div id="container-open-errors" class="mt-4"></div>
<turbo-frame id="inventory-detail-panel">
  <%= render "inventories/detail_panel", state: :idle %>
</turbo-frame>
<turbo-frame id="container-reveal"></turbo-frame>
