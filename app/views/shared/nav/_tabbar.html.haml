- tabs = primary_tab_items
- current = active_tab_id

%nav{ class: "fixed bottom-0 left-0 right-0 z-50 border-t border-slate-800 bg-slate-950/95 backdrop-blur flex justify-center",
      "aria-label" => "Primary navigation",
      role: "navigation",
      style: "padding-bottom: calc(env(safe-area-inset-bottom, 0px) + 0.75rem);" }
  .w-full.max-w-3xl.flex.items-stretch.gap-2.px-3.pt-3
    - tabs.each do |tab|
      - active = current == tab[:id]
      - base_classes = "flex-1 inline-flex flex-col items-center justify-center gap-1 rounded-2xl px-3 py-2 text-xs font-semibold transition focus:outline-none focus-visible:ring-2 focus-visible:ring-indigo-400 focus-visible:ring-offset-2 focus-visible:ring-offset-slate-950"
      - state_classes = active ? "bg-indigo-500/20 text-white shadow-inner shadow-indigo-500/30" : "text-slate-400 hover:text-slate-100 hover:bg-slate-800/60"
      = link_to tab[:path],
                class: "#{base_classes} #{state_classes}",
                aria: { current: active ? "page" : nil, label: tab[:label] },
                data: { turbo: "true" } do
        - case tab[:id]
        - when :pets
          %svg.h-6.w-6{
            "aria-hidden" => "true",
            fill: "none",
            stroke: "currentColor",
            viewBox: "0 0 24 24"
          }
            %path{
              d: "M4.8 10.2c0-2.7 2.3-4.9 5.2-4.9 1.3 0 2.5.5 3.5 1.3.9-.8 2.1-1.3 3.4-1.3 2.9 0 5.2 2.2 5.2 4.9 0 4.9-8.6 9.5-8.6 9.5S4.8 15.1 4.8 10.2z",
              "stroke-linecap" => "round",
              "stroke-linejoin" => "round",
              "stroke-width" => active ? 1.6 : 1.2
            }
        - when :store
          %svg.h-6.w-6{
            "aria-hidden" => "true",
            fill: "none",
            stroke: "currentColor",
            viewBox: "0 0 24 24"
          }
            %path{
              d: "M4 7h16l-1.5 12.5c-.1.9-.9 1.5-1.8 1.5H7.3c-.9 0-1.7-.7-1.8-1.5L4 7z",
              "stroke-linecap" => "round",
              "stroke-linejoin" => "round",
              "stroke-width" => active ? 1.6 : 1.2
            }
            %path{
              d: "M9 7V5a3 3 0 0 1 6 0v2",
              "stroke-linecap" => "round",
              "stroke-linejoin" => "round",
              "stroke-width" => active ? 1.6 : 1.2
            }
        - when :explore
          %svg.h-6.w-6{
            "aria-hidden" => "true",
            fill: "none",
            stroke: "currentColor",
            viewBox: "0 0 24 24"
          }
            %path{
              d: "M12 3l3.8 7.7 8.2 1.2-6 5.8 1.4 8.1L12 21.4 5.6 25l1.4-8.1-6-5.8 8.2-1.2z",
              transform: "translate(-4 -3)",
              "stroke-linecap" => "round",
              "stroke-linejoin" => "round",
              "stroke-width" => active ? 1.6 : 1.2
            }
        %span= tab[:label]

    -# Overflow / hamburger menu
    %div.flex-shrink-0{"data-controller" => "overflow-menu"}
      - button_classes = "inline-flex h-full min-w-[3.25rem] flex-col items-center justify-center gap-1 rounded-2xl bg-slate-900/60 px-3 py-2 text-xs font-semibold text-slate-300 transition hover:bg-slate-800/80 focus:outline-none focus-visible:ring-2 focus-visible:ring-indigo-400 focus-visible:ring-offset-2 focus-visible:ring-offset-slate-950"
      %button{ class: button_classes,
               "aria-haspopup" => "menu",
               "aria-expanded" => "false",
               "aria-controls" => "overflow-menu-sheet",
               data: { action: "click->overflow-menu#open", overflow_menu_target: "trigger" } }
        %svg.h-6.w-6{
          "aria-hidden" => "true",
          fill: "none",
          stroke: "currentColor",
          viewBox: "0 0 24 24",
          "stroke-linecap" => "round",
          "stroke-linejoin" => "round",
          "stroke-width" => "1.5"
        }
          %path{ d: "M4 7h16" }
          %path{ d: "M4 12h16" }
          %path{ d: "M4 17h16" }
        %span More

      .fixed.inset-0.z-50.hidden{ id: "overflow-menu-sheet",
                                  "aria-modal" => "true",
                                  role: "dialog",
                                  data: { overflow_menu_target: "container" } }
        .absolute.inset-0{ class: "bg-slate-950/70 backdrop-blur-sm", data: { action: "click->overflow-menu#close" } }
        .absolute.bottom-0.left-0.right-0.rounded-t-3xl.bg-slate-900.border-t.border-slate-800.px-6.py-6.shadow-2xl.transition-transform.duration-200.ease-out.translate-y-full.transform{ data: { overflow_menu_target: "panel" }, tabindex: "-1" }
          .flex.items-center.justify-between.mb-6
            %h2.text-sm.font-semibold.uppercase.text-slate-300 More Destinations
            %button{
              class: "inline-flex items-center justify-center rounded-full bg-slate-800/70 p-2 text-slate-300 transition hover:text-white",
              "aria-label" => "Close menu",
              data: { action: "click->overflow-menu#close" }
            }
              %svg.h-5.w-5{
                "aria-hidden" => "true",
                fill: "none",
                stroke: "currentColor",
                viewBox: "0 0 24 24",
                "stroke-linecap" => "round",
                "stroke-linejoin" => "round",
                "stroke-width" => "1.5"
              }
                %path{ d: "M6 6l12 12" }
                %path{ d: "M18 6L6 18" }
          %ul.space-y-3.text-sm.text-slate-200
            %li
              = link_to inventory_path,
                        class: "flex items-center justify-between rounded-2xl bg-slate-800/70 px-4 py-3 text-slate-100 transition hover:bg-slate-700 focus:outline-none focus-visible:ring-2 focus-visible:ring-indigo-400 focus-visible:ring-offset-2 focus-visible:ring-offset-slate-950" do
                %span Inventory
                %span.text-xs.uppercase.text-slate-400 View
            %li{ class: "flex items-center justify-between rounded-2xl bg-slate-800/70 px-4 py-3" }
              %span Hero Profile
              %span.text-xs.uppercase.text-slate-400 Hidden
            %li{ class: "flex items-center justify-between rounded-2xl bg-slate-800/70 px-4 py-3" }
              %span Battle Queue
              %span.text-xs.uppercase.text-slate-400 Hidden
