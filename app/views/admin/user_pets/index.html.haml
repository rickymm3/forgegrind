-# app/views/admin/user_pets/index.html.haml
%h1.text-3xl.font-bold.text-slate-900.mb-6 User Pets
%p.text-sm.text-slate-600.mb-8 Manage all player-owned pets. Click a row to review or edit.

.table-container.bg-white.shadow-sm.rounded-2xl.overflow-hidden
  %table.min-w-full.divide-y.divide-slate-200
    %thead.bg-slate-50
      %tr
        %th.px-4.py-3.text-left.text-xs.font-semibold.text-slate-500.uppercase Email
        %th.px-4.py-3.text-left.text-xs.font-semibold.text-slate-500.uppercase Pet
        %th.px-4.py-3.text-left.text-xs.font-semibold.text-slate-500.uppercase Level
        %th.px-4.py-3.text-left.text-xs.font-semibold.text-slate-500.uppercase Energy
        %th.px-4.py-3.text-left.text-xs.font-semibold.text-slate-500.uppercase Status
        %th.px-4.py-3
    %tbody.bg-white.divide-y.divide-slate-200
      - @user_pets.each do |pet|
        %tr.hover:bg-slate-50.transition
          %td.px-4.py-3.align-top
            %span.text-sm.font-medium.text-slate-800= pet.user.email
          %td.px-4.py-3.align-top
            .flex.items-center.gap-3
              %img.h-9.w-9.rounded-full.object-cover{ src: pet_sprite_path(pet.pet), alt: pet.pet.name }
              %div
                %span.text-sm.font-semibold.text-slate-900= pet.name.presence || pet.pet.name
                %p.text-xs.text-slate-500= pet.pet.name
          %td.px-4.py-3.align-top
            %span.text-sm.text-slate-700= pet.level
          %td.px-4.py-3.align-top
            %span.text-sm.text-slate-700= pet.energy
          %td.px-4.py-3.align-top
            - status = pet.exploring? ? "Exploring" : (pet.energy.to_i <= 0 ? "Exhausted" : "Idle")
            %span.inline-flex.items-center.rounded-full.bg-slate-100.px-2.5.py-1.text-xs.font-semibold.text-slate-600= status
          %td.px-4.py-3.align-top.text-right
            = link_to "View", admin_user_pet_path(pet), class: "text-sm font-semibold text-indigo-600 hover:text-indigo-700"
            = link_to "Edit", edit_admin_user_pet_path(pet), class: "ml-3 text-sm font-semibold text-slate-600 hover:text-slate-800"
