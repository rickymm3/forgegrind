<% user_pet        = @user_pet %>
<% pet             = user_pet.pet %>
<% pet_name        = user_pet.name.presence || pet.name %>
<% rarity_name     = user_pet.rarity&.name || "Unknown" %>

<% content_for :head do %>
  <%= stylesheet_link_tag "user_pet_show", "data-turbo-track": "reload" %>
<% end %>

<% content_for :main_style, "padding-bottom: 0;" %>
<% content_for :main_class, "px-0 pt-4 flex flex-col" %>
<% content_for :main_inner_class, "px-4 flex flex-col h-full" %>

<% content_for :header do %>
  <div class="mx-auto flex w-full max-w-4xl items-center justify-between gap-4 px-4">
    <div class="flex items-center gap-3">
      <%= link_to user_pets_path,
                  class: "inline-flex h-10 w-10 items-center justify-center rounded-full border border-slate-800 bg-slate-900/70 text-slate-300 transition hover:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-indigo-400 focus-visible:ring-offset-2 focus-visible:ring-offset-slate-950",
                  aria: { label: "Back to pets" },
                  data: { turbo: false } do %>
        <span aria-hidden="true" class="text-lg">←</span>
      <% end %>
      <div>
        <h1 class="text-2xl font-semibold text-white"><%= pet_name %></h1>
      </div>
    </div>
    <div class="inline-flex items-center gap-2 rounded-full border border-indigo-500/40 bg-indigo-500/10 px-3 py-1 text-[11px] font-semibold uppercase tracking-wide text-indigo-100">
      <span aria-hidden="true">★</span>
      <%= rarity_name %>
    </div>
  </div>
<% end %>

<div class="pet-page">
  <turbo-frame id="<%= user_pet_panel_dom_id(user_pet) %>" class="pet-panel-container">
    <%= render "user_pets/panel_overview", user_pet: user_pet %>
  </turbo-frame>
</div>

<%= render "user_pets/action_panel_frame",
           user_pet: user_pet,
           context: :page,
           state: :idle,
           needs_preview: [],
           personality_changes: [] %>
